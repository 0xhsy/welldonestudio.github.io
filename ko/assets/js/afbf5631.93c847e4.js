"use strict";(self.webpackChunkwelldone_docs=self.webpackChunkwelldone_docs||[]).push([[7855],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return m}});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=c(n),m=r,f=u["".concat(l,".").concat(m)]||u[m]||d[m]||o;return n?a.createElement(f,i(i({ref:t},p),{},{components:n})):a.createElement(f,i({ref:t},p))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var c=2;c<o;c++)i[c]=n[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},68799:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return l},default:function(){return m},frontMatter:function(){return s},metadata:function(){return c},toc:function(){return d}});var a=n(83117),r=n(80102),o=(n(67294),n(3905)),i=["components"],s={title:"Object Model",description:"Learning Move 0x01",sidebar_position:3},l="Object Model",c={unversionedId:"tutorials/aptos-account/object-model",id:"tutorials/aptos-account/object-model",title:"Object Model",description:"Learning Move 0x01",source:"@site/i18n/ko/docusaurus-plugin-content-docs/current/tutorials/aptos-account/object-model.md",sourceDirName:"tutorials/aptos-account",slug:"/tutorials/aptos-account/object-model",permalink:"/ko/tutorials/aptos-account/object-model",draft:!1,editUrl:"https://github.com/welldonestudio/welldonestudio.github.io/tree/master/docs/tutorials/aptos-account/object-model.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{title:"Object Model",description:"Learning Move 0x01",sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Resource Account",permalink:"/ko/tutorials/aptos-account/resource-account"},next:{title:"KMS",permalink:"/ko/tutorials/kms/"}},p={},d=[{value:"Introduction",id:"introduction",level:2},{value:"<strong>Analyzing</strong> <code>object.move</code>",id:"analyzing-objectmove",level:2},{value:"Structs",id:"structs",level:3},{value:"Functions",id:"functions",level:3},{value:"Implementation example \u2014 Ticket as Object",id:"implementation-example--ticket-as-object",level:2},{value:"Object model implementations within Aptos Framework:",id:"object-model-implementations-within-aptos-framework",level:2}],u={toc:d};function m(e){var t=e.components,n=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"object-model"},"Object Model"),(0,o.kt)("div",null,(0,o.kt)("span",{className:"author-sm"},"December 8, 2023"),(0,o.kt)("div",{className:"author-div"},(0,o.kt)("div",{className:"author-avatars"},(0,o.kt)("a",{href:"https://github.com/aladeenb",target:"_blank"},(0,o.kt)("img",{src:"https://avatars.githubusercontent.com/aladeenb"}))),(0,o.kt)("div",null,(0,o.kt)("span",{className:"author-name"},"Aladeenb (LAY)"),(0,o.kt)("br",null),(0,o.kt)("span",{className:"author-sm"},"Blockchain Engineer, Townesquare ")))),(0,o.kt)("h2",{id:"introduction"},"Introduction"),(0,o.kt)("p",null,"Object model introduces a comprehensive capability framework that facilitates control over resources, ownership management, and event emission, which in return enhances the functionality and flexibility of on-chain interactions."),(0,o.kt)("p",null,"The primary motivation behind the object model is to enable Move to represent a set of different complex types as a one collection of resources stored within a single address."),(0,o.kt)("p",null,"By organizing resources in this manner, objects can encompass various elements such as NFTs, tokens, and specialized data structures like player objects within a game. The model offers several advantages, including improved type-safety, enhanced data access, and the ability to emit events directly from objects."),(0,o.kt)("p",null,"The existing Aptos data model relies on the store ability within Move, allowing structs to be stored in global storage. However, this approach has limitations:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"Limited data accessibility:")," Data can be placed within user-defined resources, making it inaccessible or violating the expected behavior for that data. This can cause confusion for users and creators.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"Mixing data types:")," Different data types can be stored in a single data structure using the \u201cany\u201d type, but this incurs additional costs due to deserialization. It also introduces confusion when developers expect a specific field to represent a particular type.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"Lack of data composability:")," Move currently has restrictions on recursive data structures, which limits the composability of data. Moreover, true recursive data structures can lead to security vulnerabilities.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"Complex data referencing:")," Referencing existing data within entry functions requires substantial code. Supporting unique keys for string validation becomes intricate, hindering development efficiency.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"Limited event emission:")," Events can only be emitted from an account, not directly from associated data, leading to disjointed event tracking.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"Costly transfer logic:")," Transferring logic is restricted to module-specific APIs, resulting in unnecessary cost overhead and resource loading for both senders and receivers."))),(0,o.kt)("h2",{id:"analyzing-objectmove"},(0,o.kt)("strong",{parentName:"h2"},"Analyzing")," ",(0,o.kt)("inlineCode",{parentName:"h2"},"object.move")),(0,o.kt)("p",null,"Let\u2019s delve into the composition of the object model: The core structure compromised of four components."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-rust"},"struct `ObjectCore` has key {\n    guid_creation_num: u64,\n    owner: address,\n    allow_ungated_transfer: bool,\n    transfer_events: event::EventHandle<TransferEvent>,\n}\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"guid_creation_num"),":")," A distinctive identifier."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"owner"),":")," The owner's address (whether pertaining to an object or an account)."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"allow_ungated_transfer"),":")," A boolean variable enabling or disabling the object's transferability. Visualize this variable as a gate, allowing the execution of transfers when in the open (true) state, and restricting them when closed (false)."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"transfer_events"),":")," The transfer event that is emitted whenever a transfer takes place.")),(0,o.kt)("p",null,"These variables represent the object\u2019s uniqueness, ownership details, transferability status, and discoverability, respectively. By already encompassing the core structure, the principles of scarcity within the Move framework is effectively validated."),(0,o.kt)("p",null,"[Scarcity refers to the limited availability of a particular object or asset within a given system."),(0,o.kt)("p",null,"Firstly, ",(0,o.kt)("inlineCode",{parentName:"p"},"guid_creation_num")," assigned to each object ensures that no two entities share the same identity. This uniqueness fosters a sense of rarity and exclusivity, as each object can be distinctly identified and differentiated from others."),(0,o.kt)("p",null,"Secondly, ",(0,o.kt)("inlineCode",{parentName:"p"},"owner")," address associated with the object or account further enhances scarcity. By explicitly designating an owner, it establishes a sense of ownership and control over the object, limiting its availability to a specific individual or entity. This owner-based restriction helps maintain scarcity by ensuring that the transfer of ownership is intentional and controlled."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"allow_ungated_transfer"),", acting as a gate for enabling or disabling transfer, adds an additional layer of scarcity enforcement. By providing the ability to regulate and restrict transfers, the model empowers owners to determine when and to whom an object can be transferred. This mechanism prevents unauthorized or undesired transfers, reinforcing the scarcity of the object by granting ownership control."),(0,o.kt)("p",null,"Finally, ",(0,o.kt)("inlineCode",{parentName:"p"},"transfer_events"),", emitted whenever a transfer occurs, contributes to the overall discoverability and transparency of the system. This event serves as an acknowledgment and record of the transfer, allowing participants to be aware of ownership changes and facilitating the tracking of object movement. By providing visibility into the transfer process, the model ensures that the scarcity of an object is evident and verifiable.]"),(0,o.kt)("p",null,"These properties define the object model:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"simplified storage interface."),(0,o.kt)("li",{parentName:"ul"},"data and ownership model are globally accessible."),(0,o.kt)("li",{parentName:"ul"},"extensible programming model."),(0,o.kt)("li",{parentName:"ul"},"simplified storage interface: the object model supports a heterogeneous collection of resources to be stored together, providing a common core data layer for different data types. This means that different data types can be stored together.")),(0,o.kt)("p",null,"The purpose of this feature is to enable data types to share common functionality and resources while still allowing for richer extensions specific to each data type. For example, the core data layer may contain shared properties or attributes that are common to all objects, while the extensions may contain additional properties or behaviors specific to each object type (e.g., a concert ticket object may have additional properties related to the concert event)."),(0,o.kt)("p",null,"In order to simplifies the storage and retrieval process, resources within an object share the same storage. ",(0,o.kt)("inlineCode",{parentName:"p"},"#[resource_group(scope = global)]")),(0,o.kt)("p",null,"This also enables the sharing of common data structures or core data layers among different resource types. For example, all resources within an object can share a common set of tokens or basic data fields. ",(0,o.kt)("inlineCode",{parentName:"p"},"#[resource_group_member(group = aptos_framework::object::ObjectGroup)]")),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"Object<phantom T>")," struct allows for the storage and retrieval of objects of different types in a unified manner, providing a simplified interface to interact with the objects stored in the Move storage."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"data and ownership model are globally accessible. Objects and their associated data can be accessed and managed from anywhere since they are not confined to specific scopes or modules but are accessible globally.")),(0,o.kt)("h3",{id:"structs"},"Structs"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"ObjectCore"),": This struct defines the core properties of an object, including the owner, transferability, and events associated with the object. It represents the ownership and data model of an object.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"Object<phantom T>"),": This struct represents a pointer to an object. It holds the address of the object and allows access to the underlying data. It represents the data model of an object.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"ConstructorRef"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"DeleteRef"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"ExtendRef"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"TransferRef"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"LinearTransferRef"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"DeriveRef"),": These structs represent references or handles to perform various operations on objects, such as creation, deletion, extension, transfer, and derivation. They provide access to the ownership and data model of an object."))),(0,o.kt)("h3",{id:"functions"},"Functions"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"create_named_object"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"create_object_from_account"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"generate_delete_ref"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"generate_extend_ref"),", etc.: These functions manipulate the object model by creating objects, generating references, and performing operations on objects. They interact with the data and ownership model of objects.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"This structure promotes creating and managing objects with a globally accessible data and ownership model, enabling various operations on objects and supporting event handling.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"extensible programming model: This refers to the ability to extend and customize the behavior of objects without modifying their original implementation. It allows developers to add new functionality, modify existing behavior, or specialize objects for specific use cases without directly modifying the underlying code."))),(0,o.kt)("p",null,"These structs and functions provide mechanisms to create, configure, extend, transfer, derive, convert, and delete objects, allowing for individualization of user applications and leveraging the core framework."),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"as a general rule, input validation, access control, appropriate event handling, and unit testing are effective to identify and potential security vulnerabilities.")),(0,o.kt)("h2",{id:"implementation-example--ticket-as-object"},"Implementation example \u2014 Ticket as Object"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://github.com/Aladeenb/simple-ticket"},"https://github.com/Aladeenb/simple-ticket")),(0,o.kt)("p",null,"This module represents a simple ticket implementation of the object model:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"A ticket represents an object, it consists of 2 variables, price and seat."),(0,o.kt)("li",{parentName:"ul"},"A seat represents another object, it has 2 variables as well, category and price_modifier, and it can be upgraded."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/Aladeenb/simple-ticket"},"click for more details"))),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"TODO: Tickets can be transferred; add a function for that.")),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"object-model-implementations-within-aptos-framework"},"Object model implementations within Aptos Framework:"),(0,o.kt)("p",null,"The following implementations will be explained in future articles:"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://github.com/aptos-labs/aptos-core/tree/fbc88b83099558421aea6f62296d890c1c2c82df/aptos-move/framework/aptos-token-objects"},"Aptos Token v2: an object-based token model")),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://github.com/aptos-labs/aptos-core/tree/fbc88b83099558421aea6f62296d890c1c2c82df/aptos-move/framework/aptos-token-objects"},"Aptos Fungible Asset: an object-based fungible asset model")),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://github.com/aptos-labs/aptos-core/blob/fbc88b83099558421aea6f62296d890c1c2c82df/aptos-move/framework/aptos-framework/sources/primary_fungible_store.move"},"Primary Fungible Store: a support module for managing and transferring fungible assets")))}m.isMDXComponent=!0}}]);